py/dvcz/TODO

2016-11-30
    * rearrange dvc_adduser so that it picks up using_sha and dir_struc
        from any existing uDir

2016-11-28
    * modify dvc_bkp2u to write to U_PATH/in/ID/, where ID represents
        the 40- or 64-char hex value under $HOME/.dvcz/id
    * rename dvc_commit dvc_commit_old, dvc_bkp2u dvc_commit            * DONE
    * FIX: countem generating incorrect counts

2016-11-28, edited from -04-21, edited from -18
    dvc_commit SPECS, ASSUMING MULTIPLE PROJECTS PER USER:
    * version number (a DecimalVersion) is represented by three or four
        numbers, each less than 256, separated by periods ('.'), with
        the optional fourth the last the so-called build number, which 
        is zero by default 
    * assume there is an append-only file in each project's .dvcz 
        subdirectory called buildLists
    * procedure:
        - get a lock on $PROJECT_NAME using xlattice.proc_lock
        - read version number N.N.N, read buildLists file to 
            determine its $BUILD_NUMBER N.N.N.B including build part
            * this determines the title of the buildList, which
            is $PROJECT_NAME  $BUILD_NUMBER where the B part is zero 
            unless there is an earlier commit for build N.N.N, in 
            which case B is one higher than the previous build number
        - read the RSA pivate key in PATH_TO_BL_KEYS/skPriv.pem
        - create buildList using the public key, signing it with 
            the private key
        - hash the buildList; this is its content key $HEX_KEY
        - insert the buildList into $DVCZ_UDIR using that
            content key
        - append "$TIMESTAMP $BUILD_NUMBER $HEX_KEY" to the
            buildLists file
        - unlock the project

2016-11-28, edited from -03-31
    * dvc_init sets up individual user
        - writes private RSA key to ~/.dvcz/node/skPriv.pem
            * this file should be 0o400, user-readable only
    * dvc_commit (former dvc_bkp2u)
        - -X uses .dvczignore by default if present
        - writes buildList as PROJECT_DIR/.buildLists/CCYYMMDD-HHMMSS

